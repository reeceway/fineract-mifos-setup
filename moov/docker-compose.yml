version: '3.8'

services:
  # ACH file handling for US domestic payments
  ach:
    image: moov/ach:latest
    container_name: moov-ach
    restart: always
    ports:
      - "8200:8080"
    environment:
      - LOG_FORMAT=plain
    healthcheck:
      test: ["CMD", "wget", "-q", "--spider", "http://localhost:8080/health"]
      interval: 30s
      timeout: 10s
      retries: 3

  # Wire/FedWire handling
  wire:
    image: moov/wire:latest
    container_name: moov-wire
    restart: always
    ports:
      - "8201:8080"
    environment:
      - LOG_FORMAT=plain
    healthcheck:
      test: ["CMD", "wget", "-q", "--spider", "http://localhost:8080/health"]
      interval: 30s
      timeout: 10s
      retries: 3

  # ISO 20022 message handling
  iso20022:
    image: moov/iso20022:latest
    container_name: moov-iso20022
    restart: always
    ports:
      - "8202:8080"
    environment:
      - LOG_FORMAT=plain

networks:
  default:
    name: moov-network